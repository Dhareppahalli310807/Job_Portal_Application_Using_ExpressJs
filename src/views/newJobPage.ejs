<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Post Job Form</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<section>
  <div class="container">
    <form action="/postjob" method="post">
      <div class="form-container">
        <% if(errors) {  %>
          <div class="notification is-warning">
            <ul>
              <li><h4>Warning!</h4></li>
              <% errors.forEach(err => { %>
                <li>⚠️ <%= err.msg %></li>
              <% }) %>
            </ul>
          </div>
        <% } %>

        <div class="post-title">
          <h3>Post new Job</h3>
        </div>

        <div class="form-full">
          <div>
            <label class="label" for="companyname">Company Name</label>
            <input
              class="input is-medium"
              type="text"
              placeholder="ex: Microsoft"
              id="companyname"
              name="companyname"
            />
          </div>
          <div>
            <label class="label" for="joblocation">Job location</label>
            <input
              class="input is-medium"
              type="text"
              placeholder="ex: Bengaluru"
              id="joblocation"
              name="joblocation"
            />
          </div>
        </div>

        <div class="select is-success">
          <select name="jobcategory">
            <option value="">Select Job Category</option>
            <option value="Tech">Tech job</option>
            <option value="Non-Tech">Non-Tech job</option>
          </select>
        </div>

        <div class="select is-success">
          <select name="jobdesignation" id="jobdesignation">
            <option value="">Select Job Desgnation</option>
            <option value="HR">HR</option>
            <option value="Data entry">DATA ENTRY</option>
            <option value="SDE-1">SDE-1</option>
            <option value="SDE-2">SDE-2</option>
            <option value="Devops">DEVOPS</option>
            <option value="MERN Stack developer">MERN STACK DEVELOPER</option>
            <option value="React developer">REACT DEVELOPER</option>
            <option value="Frontend Developer">FRONTEND DEVELOPER</option>
            <option value="Backend Developer">BACKEND DEVELOPER</option>
            <option value="Java Developer">JAVA DEVELOPER</option>
            <option value="Blockchain developer">BLOCKCHAIN DEVELOPER</option>
            <option value="AI/ML">AI/ML ENGINEER</option>
            <option value="Data Analysis">DATA ANALYSTS</option>
          </select>
        </div>

        <div class="form-full">
          <div>
            <label class="label" for="salary">Expected Salary</label>
            <input
              class="input is-normal"
              type="number"
              placeholder="ex: 500000"
              id="salary"
              name="salary"
              min="100"
            />
          </div>
          <div>
            <label class="label" for="numberofopenings">Num of Openings</label>
            <input
              class="input is-normal"
              type="number"
              placeholder="ex: 5"
              id="numberofopenings"
              name="numberofopenings"
              min="1"
            />
          </div>
        </div>

        <div class="form-full">
          <div>
            <label class="label" for="applyby">Apply by :</label>
            <input
              class="input is-normal"
              type="date"
              name="applyby"
              id="applyby"
            />
          </div>
          <div>
            <label class="label" for="skillsrequired">Skills required :</label>
            <select
              class="select is-normal"
              name="skillsrequired"
              id="skillsrequired"
              multiple
            >
              <!-- Options will be populated dynamically using JavaScript -->
            </select>
          </div>
        </div>

        <div class="form-full">
          <button class="btn waves-effect waves-light" type="submit">
            Submit&nbsp;
            <i class="fa-solid fa-paper-plane fa-bounce"></i>
          </button>
        </div>

      </div>
    </form>
  </div>
</section>

<script>
  // Get the jobdesignation and skillsrequired elements
  const jobDesignationSelect = document.getElementById('jobdesignation');
  const skillsRequiredSelect = document.getElementById('skillsrequired');

  // Define an object to map job designations to skills
  const skillsMap = {
    'HR': ['Communication', 'Recruitment', 'Employee Relations'],
    'Data entry': ['Typing', 'Data Entry', 'Attention to Detail'],
    'SDE-1': ['Programming', 'Problem Solving', 'Algorithm Design'],
    'SDE-2': ['Advanced Programming', 'System Design', 'Debugging'],
    'Devops': ['CI/CD', 'Docker', 'Kubernetes'],
    'MERN Stack developer': ['MongoDB', 'Express.js', 'React', 'Node.js'],
    'React developer': ['React', 'JavaScript', 'HTML', 'CSS'],
    'Frontend Developer': ['HTML', 'CSS', 'JavaScript', 'UI/UX Design'],
    'Backend Developer': ['Java', 'Python', 'Node.js', 'SQL'],
    'Java Developer': ['Java', 'Spring', 'Hibernate', 'SQL'],
    'Blockchain developer': ['Blockchain', 'Smart Contracts', 'Cryptocurrency'],
    'AI/ML': ['Machine Learning', 'Data Analysis', 'Python'],
    'Data Analysis': ['Data Analysis', 'Statistics', 'SQL']
  };

  // Add event listener to jobdesignation select element
  jobDesignationSelect.addEventListener('change', function() {
    // Clear existing options
    skillsRequiredSelect.innerHTML = '';

    // Get selected jobdesignation
    const selectedJob = this.value;

    // Populate skillsrequired based on selected jobdesignation
    if (skillsMap[selectedJob]) {
      skillsMap[selectedJob].forEach(skill => {
        const option = document.createElement('option');
        option.value = skill;
        option.textContent = skill;
        skillsRequiredSelect.appendChild(option);
      });
    }
  });
</script>

</body>
</html>
